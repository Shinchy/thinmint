/**
 * @license
 * ThinMint 0.0.11 <https://github.com/cloudily/thinmint>
 * Available under MIT license <https://raw.githubusercontent.com/cloudily/thinmint/master/LICENSE>
 */
var mustache=mustache||{},rb=rb||{};jQuery.isElement=function(e){try{return!(!e.length||1!=e.get(0).nodeType)}catch(t){return!1}},jQuery.fn.serializeObject=function(){var obj={};return jQuery.each(this.serializeArray(),function(i,o){var n=o.name,v=o.value;obj[n]=void 0===obj[n]?v:jQuery.isArray(obj[n])?obj[n].concat(v):[obj[n],v]}),obj};var ThinMint={};ThinMint.VERSION="0.0.11",ThinMint.Event={},ThinMint.Logger=function(){this.on=function(){return this._toggle.apply(this,arguments),this},this.off=function(){return Array.prototype.unshift.call(arguments,!0),this._toggle.apply(this,arguments),this}},ThinMint.Logger.methods=["assert","clear","count","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","timelineEnd","trace","warn"],ThinMint.Logger.map=function(method){return console&&"object"==typeof console&&"function"==typeof console[method]?function(){console[method].apply(console,arguments)}:function(){}},(ThinMint.Logger.mapper=function(){for(var i=0,l=ThinMint.Logger.methods.length;l>i;i++)ThinMint.Logger.prototype[ThinMint.Logger.methods[i]]=ThinMint.Logger.map(ThinMint.Logger.methods[i])})(),ThinMint.Logger.on=function(){return ThinMint.Logger.prototype._toggle.apply(ThinMint.Logger.prototype,arguments),this},ThinMint.Logger.off=function(){return Array.prototype.unshift.call(arguments,!0),ThinMint.Logger.prototype._toggle.apply(ThinMint.Logger.prototype,arguments),this},ThinMint.Logger.prototype._toggle=function(){var noop=!1;"function"==typeof Object.getPrototypeOf?Object.getPrototypeOf(this):this.__proto__;"boolean"==typeof arguments[0]&&(noop=Array.prototype.shift.apply(arguments));var methods=arguments;0===methods.length&&(methods=ThinMint.Logger.methods);for(var i=0,l=methods.length;l>i;i++)"string"==typeof methods[i]&&-1!==ThinMint.Logger.methods.indexOf(methods[i])&&(this[methods[i]]=noop===!0?function(){}:ThinMint.Logger.map(methods[i]))},ThinMint.Util={},ThinMint.Util.callback=function(callback){return"function"==typeof callback?callback:function(){}},ThinMint.Util.Mustache={},ThinMint.Util.Mustache.console=new ThinMint.Logger,ThinMint.Util.Mustache.getTemplate=function(path){if(!path||"object"==typeof path)return null;var templateKey=path.replace(/\//g,"___"),template=mustache[templateKey];if(template)return template;for(var rbSets=["language","error_messages"],i=0,rbSetsLength=rbSets.length;rbSetsLength>i;i++){var _bundle=rbSets[i],_language=rb[_bundle];if(jQuery.isPlainObject(_language)!==!1&&0===path.indexOf("rb."+_bundle+".")){var languageKey=path.substr(4+_bundle.length);if("string"==typeof _language[languageKey])return _language[languageKey]}}this.console.error("ThinMint.Util.Mustache.getTemplate","Mustache template missing: ",path);try{1==generic.cookie("magic_mustache_unroll")&&this.console.error("If experiencing issues, please disable mustache unroll: /shared/debug_magic_js.tmpl?magic_mustache_unroll=0")}catch(e){}return path},ThinMint.Util.Mustache.render=function(template,data){var response;data=jQuery.isPlainObject(data)?data:{},data.rb=rb;try{response=Mustache.render(template,data,ThinMint.Util.Mustache.getTemplate)}catch(e){this.console.error(template,data,e),response=template+"\n"+e.toString()}return response},ThinMint.Page={},ThinMint.Page.Panel=function(){var allPanels={},messageBus=jQuery({}),that={};return that.console=new ThinMint.Logger,that.add=function(id,panel){return"string"!=typeof id?void that.console.error("ThinMint.Page.Panel.add","ID must be a string.",arguments):panel instanceof ThinMint.Panel==!1?void that.console.error("ThinMint.Page.Panel.add","Panel must be an instance of ThinMint.Panel",arguments):("undefined"!=typeof allPanels[id]&&(that.console.info("ThinMint.Page.Panel.add","ID already exists ... overwriting",arguments),allPanels[id]._destruct(),allPanels[id]=null,delete allPanels[id]),allPanels[id]=panel,that)},that.get=function(id){return"undefined"==typeof allPanels[id]&&that.console.info("ThinMint.Page.Panel.get","Could not find ID.",arguments),allPanels[id]},that.all=function(){return allPanels},that.clear=function(){var panels=that.all();for(var key in panels)if(panels.hasOwnProperty(key)!==!1){try{panels[key]._destruct()}catch(e){}delete panels[key]}},that.trigger=function(){return"string"!=typeof arguments[0]?void that.console.error("ThinMint.Page.Panel.trigger","Event Name must be a string.",arguments):messageBus.trigger.apply(messageBus,arguments)},that.on=function(){return"string"!=typeof arguments[0]&&jQuery.isPlainObject(arguments[0])===!1?void that.console.error("ThinMint.Page.Panel.on","Event Name must be a string.",arguments):void messageBus.on.apply(messageBus,arguments)},that.one=function(){return"string"!=typeof arguments[0]&&jQuery.isPlainObject(arguments[0])===!1?void that.console.error("ThinMint.Page.Panel.on","Event Name must be a string.",arguments):void messageBus.one.apply(messageBus,arguments)},that.off=function(){return"string"!=typeof arguments[0]&&jQuery.isPlainObject(arguments[0])===!1?void that.console.error("ThinMint.Page.Panel.off","Event Name must be a string.",arguments):void messageBus.off.apply(messageBus,arguments)},that}(),ThinMint=ThinMint||{},ThinMint.Queue=function(){var that={};return that.list=[],that.index=1,that.aborted=!1,that.finished=!1,that.async=!0,that.add=function(sequenceFunction){that.list.push(sequenceFunction)},that.start=function(){var i=0;if(that.index=-1,that.aborted=!1,"function"==typeof that.onStart&&that.onStart(),1==that.async)if(that.list.length>0)for(that.index=0,i=0;i<that.list.length;i++){var currFunction=that.list[i];"function"==typeof currFunction&&currFunction(that)}else that.next();else that.next()},that.end=function(err){"function"==typeof that.onEnd&&that.onEnd(err),that.finished=!0},that.next=function(){if(!that.aborted){if(++that.index==that.list.length)return that.end();if(0==that.async){var currFunction=that.list[that.index];if(currFunction)if(that.async===!1){var args=Array.prototype.slice.call(arguments);args.unshift(that),currFunction.apply(currFunction,args)}else currFunction(that)}}},that.abort=function(){that.index=-1,that.aborted=!0},that},ThinMint=ThinMint||{},ThinMint.Storage=function(store){var getDate,expiresKey,that={},namespace="",expiresSuffix=".expires";return getDate=function(){return+new Date},expiresKey=function(key){return key+expiresSuffix},0==store&&(store=function(){},store.prototype.data={},store.prototype.length=0,store.prototype.updateLength=function(){var that=this;that.length=0,jQuery.each(that.data,function(){++that.length})},store.prototype.key=function(index){var match,i=0;return jQuery.each(this.data,function(key){return i++==index?(match=key,!1):void 0}),match},store.prototype.setItem=function(key,value){this.data[key]=1,this[key]=value,this.updateLength()},store.prototype.getItem=function(key){return this[key]},store.prototype.removeItem=function(key){delete this[key],delete this.data[key],this.updateLength()},store.prototype.clear=function(){var that=this;jQuery.each(this.data,function(index){delete that[index]}),this.data={},this.length=0},store=new store),that.all=function(){var i,key,l=store.length,data={};for(i=0;l>i;i++)key=store.key(i),data[key]=that.get(key);return data},that.set=function(key,value,expiresMs){if(key=namespace+key,"function"==typeof store[key])return console.error(key+" is function.");try{var data=store.setItem(key,JSON.stringify(value));return"undefined"!=typeof expiresMs&&store.setItem(expiresKey(key),getDate()+expiresMs),data}catch(e){that.gc()}},that.get=function(key){key=namespace+key;var expires=store.getItem(expiresKey(key));return expires&&getDate()>expires&&(that.destroy(key),that.destroy(expiresKey(key))),JSON.parse(store.getItem(key))},that.destroy=function(key){return key=namespace+key,store.removeItem(key)},that.clear=function(){return store.clear()},that.toString=function(){return JSON.stringify(that.all())},that.namespace=function(ns){namespace=ns},that.increment=function(key,count){"number"!=typeof count&&(count=1);var result=that.get(key);if(result)return that.set(key,+result+count)},that.getNamespace=function(ns){var key=getDate(),result=that.get(ns);return result?result:(that.set(ns,key),key)},that.setWithNamespace=function(ns,key,val,expiresMs){var ns=that.getNamespace(ns);return that.set(ns+"."+key,val,expiresMs)},that.getWithNamespace=function(ns,key){var ns=that.getNamespace(ns);return that.get(ns+"."+key)},that.clearNamespace=function(ns){return that.increment(ns)},that.gc=function(){var i,key,place,expiresLength=expiresSuffix.length,l=store.length;for(i=0;l>i;i++)key=store.key(i),key&&(place=key.lastIndexOf(expiresSuffix),place>-1&&key.length-expiresLength===place&&that.get(key.substr(0,place)))},that}("undefined"!=typeof localStorage&&localStorage),ThinMint=ThinMint||{},ThinMint.Router=function(location,undefined){var _routes=[],_mode=null,_root="/",_host=null,that={};return that.add=function(re,handler){return"function"==typeof re&&(handler=re,re=""),_routes.push({re:re,handler:handler}),that},that.remove=function(param){for(var r,i=0;i<_routes.length,r=_routes[i];i++)if(r.handler===param||r.re===param)return _routes.splice(i,1),that;return that},that.flush=function(){return _routes=[],_mode=null,_root="/",that},that.clearSlashes=function(path){return path.toString().replace(/\/$/,"").replace(/^\//,"")},that.config=function(options){return _mode=options&&options.mode&&"history"==options.mode&&history.pushState?"history":"hash",_root=options&&options.root?"/"+that.clearSlashes(options.root)+"/":"/",that},that.getFragment=function(){var fragment="";if("history"===_mode){if(!location)return"";fragment=that.clearSlashes(decodeURI(location.pathname+location.search)),fragment=fragment.replace(/\?(.*)$/,""),fragment="/"!=_root?fragment.replace(_root,""):fragment}else{if(!window)return"";var match=location.href.match(/#(.*)$/);fragment=match?match[1]:""}return that.clearSlashes(fragment)},that.listen=function(loopInterval){var current=that.getFragment(),fn=function(){current!==that.getFragment()&&(current=that.getFragment(),that.check(current))};return clearInterval(that.interval),that.interval=setInterval(fn,loopInterval||50),that},that.check=function(f){for(var fragment=f||that.getFragment(),i=0;i<_routes.length;i++){var match=fragment.match(_routes[i].re);if(match)return match.shift(),_routes[i].handler.apply(_host||{},match),that}return that},that.navigate=function(path){return path=path?path:"","history"===_mode?history.pushState(null,null,_root+that.clearSlashes(path)):(location.href.match(/#(.*)$/),location.href=location.href.replace(/#(.*)$/,"")+"#"+path),that},that}(window.location),ThinMint=ThinMint||{},ThinMint.Request=function(options){this.options=jQuery.extend(!0,{},this.options,options),this._data={},this.isCacheEnabled=!1,this.cacheNamespace="ThinMint.Request",this.cacheTTL=72e5,this.options.eventName&&this.setEventName(this.options.eventName),this.options.console&&this.setConsole(this.options.console)},ThinMint.Request.prototype.options={},ThinMint.Request.prototype.console=new ThinMint.Logger,ThinMint.Request.prototype.setConsole=function(console){return console instanceof ThinMint.Logger==!1?void this.console.error("ThinMint.Request.setConsole","Console must be an instance of ThinMint.Logger",arguments):void(this.console=console)},ThinMint.Request.prototype.getEventName=function(){return this.eventName},ThinMint.Request.prototype.setEventName=function(eventName){return"string"!=typeof eventName?void this.console.error("ThinMint.Request.setEventName","EventName must be a string.",arguments):void(this.eventName=eventName)},ThinMint.Request.prototype._time=function(){this.console.time(this.getEventName())},ThinMint.Request.prototype._timeEnd=function(){this.console.timeEnd(this.getEventName())},ThinMint.Request.prototype.set=function(key,value){"string"==typeof key?this._data[key]=value:jQuery.isPlainObject(key)&&(this._data=jQuery.extend(!0,{},this._data,key))},ThinMint.Request.prototype.get=function(key){return this._data[key]},ThinMint.Request.prototype.save=function(data,callback){var settings={};"function"==typeof data&&(callback=data,data={}),callback=ThinMint.Util.callback(callback),settings.url=this.options.url,settings.data=jQuery.extend(!0,{},this._data,data),this._dispatch(settings,callback)},ThinMint.Request.prototype.destroy=function(data,callback){var error=null;"function"==typeof data&&(callback=data,data={}),(callback=ThinMint.Util.callback(callback))(error)},ThinMint.Request.prototype.run=function(callback){this.console.warn("ThinMint.Request.run","The run method is deprecated. Use fetch instead."),this.fetch.apply(this,arguments)},ThinMint.Request.prototype.fetch=function(callback){callback=ThinMint.Util.callback(callback),this._dispatch(this.options,callback)},ThinMint.Request.prototype._dispatch=function(url,settings,callback,options){var that=this,cache=!1;return this._time(),jQuery.isPlainObject(callback)&&(options=callback,callback=null),"function"==typeof settings&&(callback=settings,settings=null),jQuery.isPlainObject(url)&&(settings=url,url=null),callback=ThinMint.Util.callback(callback),settings=jQuery.isPlainObject(settings)?settings:{},"string"==typeof url&&(settings.url=url),cache=this.getCache(settings),null!==cache?(this.console.info("ThinMint.Request._dispatch","Returning cached contents.",settings),void that.handleResponse.call(that,null,cache,null,callback,options)):void jQuery.ajax(settings).done(function(data,textStatus,jqXHR){that.setCache(settings,data),that.handleResponse.call(that,null,data,jqXHR,callback,options)}).fail(function(jqXHR,textStatus,errorThrown){var response=jqXHR.responseText;try{response=JSON.parse(response)}catch(e){}that.handleResponse.call(that,errorThrown,response,jqXHR,callback,options)})},ThinMint.Request.prototype.getCacheKey=function(settings){if(this.isCacheEnabled!==!0)return!1;settings=jQuery.isPlainObject(settings)?settings:{};var httpMethod=jQuery.trim(settings.type||settings.method||"get").toLowerCase(),url=jQuery.trim(settings.url),data=JSON.stringify(settings.data),cacheKey=httpMethod+"."+url+"."+data;return"get"!==httpMethod&&(cacheKey=!1),cacheKey},ThinMint.Request.prototype.getCache=function(settings){var cacheKey=this.getCacheKey(settings);if(cacheKey===!1)return null;var cacheValue=ThinMint.Storage.getWithNamespace(this.cacheNamespace,cacheKey);return cacheValue},ThinMint.Request.prototype.setCache=function(settings,response){var cacheKey=this.getCacheKey(settings);return cacheKey===!1?!1:ThinMint.Storage.setWithNamespace(this.cacheNamespace,cacheKey,response,this.cacheTTL)},ThinMint.Request.prototype.handleResponse=function(err,data,response,callback,options){options=jQuery.isPlainObject(options)?options:{};var _event="undefined"!=typeof options.eventName?options.eventName:this.getEventName();callback=ThinMint.Util.callback(callback),this.console.groupCollapsed("ThinMint.Request.handleResponse",_event),this.console.info(data),this.console.groupEnd(),"string"==typeof _event?ThinMint.Page.Panel.trigger(_event,[err,data,response]):this.console.warn("ThinMint.Request.handleResponse","Method does not have an eventName to be triggered.",_event,response),this._timeEnd(),callback(err,data)},ThinMint.RequestMethod=function(){var that={},_methods={};return that.console=new ThinMint.Logger,that.add=function(methodName,_Request){return _Request instanceof ThinMint.Request==!1?void that.console.error("ThinMint.RequestMethod.add","_Request must be a ThinMint.Request Object.",arguments):("undefined"!=typeof _methods[methodName]&&that.console.info("ThinMint.RequestMethod.add","Method Name ("+methodName+") already exists. Overwriting...",arguments),_methods[methodName]=_Request,that)},that.get=function(methodName){return"undefined"!=typeof _methods[methodName]?_methods[methodName]:(that.console.warn("ThinMint.RequestMethod.get","Method Name ("+methodName+") does not exist.",arguments),null)},that}(),ThinMint.RequestQueue=function(){this.requests=[]},ThinMint.RequestQueue.prototype.console=new ThinMint.Logger,ThinMint.RequestQueue.prototype.add=function(_Request){return _Request instanceof ThinMint.Request==!1&&_Request instanceof ThinMint.RpcQueue==!1?void this.console.error("RequestQueue.add","_Request must be an instance of ThinMint.Request.",arguments):(this.requests.push(_Request),this)},ThinMint.RequestQueue.prototype.run=function(callback){var queue=ThinMint.Queue();callback=ThinMint.Util.callback(callback),jQuery.each(this.requests,function(index,request){queue.add(function(seq){request.fetch(seq.next)})}),queue.onEnd=callback,queue.start()},ThinMint.RpcRequest=function(options){this.options=jQuery.extend(!0,{},this.options,{data:{JSONRPC:""},method:null,params:[],eventName:!1,save:{eventName:!1,method:null,httpMethod:"POST"},destroy:{eventName:!1,method:null,httpMethod:"POST"}}),ThinMint.Request.apply(this,arguments),this.options.method&&this.setMethod(this.options.method),this.options.params&&this.setParams(this.options.params)},ThinMint.RpcRequest.prototype=Object.create(ThinMint.Request.prototype),ThinMint.RpcRequest.prototype.parent=ThinMint.Request.prototype,ThinMint.RpcRequest.prototype.options=jQuery.extend(!0,{},ThinMint.Request.prototype.options,{url:"/rpc/jsonrpc.tmpl"}),ThinMint.RpcRequest.prototype.setMethod=function(method){return"string"!=typeof method?(this.console.error("ThinMint.RpcRequest.setMethod","Method must be a string.",arguments),this):(this.method=method,this)},ThinMint.RpcRequest.prototype.setParams=function(params){return jQuery.isArray(params)===!1?(this.console.error("ThinMint.RpcRequest.setParams","Params must be an array.",arguments),this):(this.params=params,this)},ThinMint.RpcRequest.prototype.getMethod=function(){return this.method},ThinMint.RpcRequest.prototype.getParams=function(){return this.params},ThinMint.RpcRequest.prototype.getQuery=function(){var query={};return query.method=this.getMethod(),query.params=this.getParams(),query},ThinMint.RpcRequest.prototype.save=function(data,callback){var settings={};"function"==typeof data&&(callback=data,data={}),callback=ThinMint.Util.callback(callback),settings=this._constructRequest("save",data),this._dispatch(settings,callback,{eventName:this.options.save.eventName})},ThinMint.RpcRequest.prototype._constructRequest=function(method,data){var query=this.getQuery(),settings={},querystring={dbgmethod:this.options[method].method};return query.id=1,query.method=this.options[method].method,query.params[0]=jQuery.extend(!0,{},query.params[0],data),settings.url=this.options.url,settings.url+=(settings.url.indexOf("?")>-1?"&":"?")+jQuery.param(querystring),settings.type=this.options[method].httpMethod,settings.data={},settings.data.JSONRPC=JSON.stringify([query]),settings},ThinMint.RpcRequest.prototype.destroy=function(data,callback){var settings={};"function"==typeof data&&(callback=data,data={}),callback=ThinMint.Util.callback(callback),settings=this._constructRequest("destroy",data),this._dispatch(settings,callback,{eventName:this.options.destroy.eventName})},ThinMint.RpcRequest.prototype.fetch=function(callback){var query=this.getQuery();query.id=1,this.options.data.dbgmethod=query.method,this.options.data.JSONRPC=JSON.stringify([query]),this.parent.fetch.apply(this,arguments)},ThinMint.RpcRequest.prototype.handleResponse=function(err,data,response,callback,options){jQuery.isArray(data)&&(data=data[0]),"undefined"!=typeof data.error&&(this.console.error("ThinMint.Request.handleResponse",data.error.code,data.error.message,data.error.data.messages),err=data.error),this.parent.handleResponse.call(this,err,data.result.value,response,callback,options)},ThinMint.RpcQueue=function(){this.id=1,this.methods=[],this.handled=[],this._RequestInstance={}},ThinMint.RpcQueue.prototype.console=new ThinMint.Logger,ThinMint.RpcQueue.prototype.options=jQuery.extend(!0,{},ThinMint.RpcRequest.prototype.options,{type:"POST"}),ThinMint.RpcQueue.prototype.add=function(_Request){if(_Request instanceof ThinMint.RpcRequest==!1)return void this.console.error("ThinMint.RpcQueue.add","_Request must be a ThinMint.RpcRequest Object.",arguments);var method=_Request.getQuery();return method.id=this.id++,this.console.info("ThinMint.RpcQueue.add",method),this.methods.push(method),this._RequestInstance[method.id]=_Request,this},ThinMint.RpcQueue.prototype.getRequestInstance=function(id){return this._RequestInstance[id]},ThinMint.RpcQueue.prototype.clear=function(){return this.id=1,this.methods=[],this.handled=[],this._RequestInstance={},this},ThinMint.RpcQueue.prototype.getMethods=function(){return this.methods},ThinMint.RpcQueue.prototype.getMethodsLength=function(){return this.methods.length},ThinMint.RpcQueue.prototype.getHandled=function(){return this.handled},ThinMint.RpcQueue.prototype.addHandled=function(id){return this.handled.push(id),this},ThinMint.RpcQueue.prototype.isHandled=function(id){return this.handled.indexOf(id)>-1},ThinMint.RpcQueue.prototype.clearHandled=function(){return this.handled=[],this},ThinMint.RpcQueue.prototype.verifyResponse=function(response){var that=this;jQuery.isArray(response)&&that.getMethodsLength()!=response.length&&(this.console.error("ThinMint.RpcQueue.run","Response mismatch.  Expected "+that.getMethodsLength()+" and received "+response.length),jQuery.each(that.getMethods(),function(index,method){if(!that.isHandled(method.id)){var _Request=that.getRequestInstance(method.id);_Request.handleResponse("Response missing from RpcQueue",{result:{}})}}))},ThinMint.RpcQueue.prototype.run=function(callback){this.console.warn("ThinMint.RpcQueue.run","The run method is deprecated. Use fetch instead."),this.fetch.apply(this,arguments)},ThinMint.RpcQueue.prototype.fetch=function(callback){var that=this,data={},benchmarkStart=+new Date;callback=ThinMint.Util.callback(callback),data.JSONRPC=JSON.stringify(this.getMethods()),this.console.info("ThinMint.RpcQueue.run","Requesting data for:",this.getMethods());var settings=jQuery.extend(!0,{},this.options,{data:data,success:function(response){that.clearHandled(),callback(null),jQuery.each(response,function(index,_response){var _Request=that.getRequestInstance(_response.id);_Request.handleResponse(null,_response),that.addHandled(_response.id)}),that.verifyResponse(response),that.console.debug("ThinMint.RpcQueue.run","Finished in: "+(+new Date-benchmarkStart)+"ms",that.getMethods())},error:function(){that.console.error("ThinMint.RpcQueue.run","Request failed",arguments),callback("Request failed")}});jQuery.ajax(settings)},ThinMint.DrupalRequest=function(options){if(ThinMint.Request.apply(this,arguments),"[object Array]"!==Object.prototype.toString.call(this.options.args)&&(this.options.args=[]),this.isCacheEnabled=!0,"undefined"!=typeof this.options.node){if("string"!=typeof this.options.node)return void this.console.error("ThinMint.DrupalRequest","Options.node must be a string",arguments);this.options.method="endeca_content_result",this.options.dataType="html",this.options.args.push(this.options.node)}return"string"!=typeof this.options.method?void this.console.error("ThinMint.DrupalRequest","Options.method must be a string",arguments):(this.options.url+=this.options.method,void(this.options.url+="/"+this.options.args.join("/")))},ThinMint.DrupalRequest.prototype=Object.create(ThinMint.Request.prototype),ThinMint.DrupalRequest.prototype.parent=ThinMint.Request.prototype,ThinMint.DrupalRequest.prototype.options=jQuery.extend(!0,{},ThinMint.Request.prototype.options,{url:"/elc_api/"}),ThinMint.DrupalRequest.prototype.EVENT_NAME=".content.drupal",ThinMint.DrupalRequest.prototype.handleResponse=function(err,data,response,callback,options){this.parent.handleResponse.apply(this,arguments),"string"==typeof this.options.node&&ThinMint.Page.Panel.trigger(this.options.node+this.EVENT_NAME,[err,data])},ThinMint.Panel=function($el,options){var undefined;if(jQuery.isElement($el)===!1)return void this.console.error("ThinMint.Panel","Must be a valid DOM element.",arguments);if(1!==$el.length)return void this.console.error("ThinMint.Panel","Only one element may exist per instance. If more than one of the same type of panel needs to exist on the page, use the [data-id] and [class] attributes in place of [id]. In the Controller, iterate over each panel DOM node and instantiate a new panel for each.",arguments);if("undefined"==typeof options&&(options={}),jQuery.isPlainObject(options)===!1)return void this.console.error("ThinMint.Panel","Options must be a plain object.",arguments);if(ThinMint.Mixin.EventEmitter.call(this),this.options=options,"string"!=typeof this.options.id&&$el.attr("id")===undefined){var _id=$el.data("id");"string"==typeof _id&&(this.index=$el.index('[data-id="'+_id+'"]'),this.options.id=_id+"--"+this.index)}ThinMint.Page.Panel.add(this.options.id||$el.attr("id"),this),this.$el=$el,this.dom={},this.template=null,this.templateData={},this.init()},ThinMint.Panel.prototype.console=new ThinMint.Logger,ThinMint.Panel.prototype.init=function(){this.console.info("ThinMint.Panel.init","Base init called.",arguments)},ThinMint.Panel.prototype._destruct=function(){},ThinMint.Panel.prototype.getDom=function(){},ThinMint.Panel.prototype.bindDomEvents=function(){},ThinMint.Panel.prototype.bindModelEvents=function(){},ThinMint.Panel.prototype.render=function(data){if(data=data||this.templateData,jQuery.isPlainObject(data)===!1)return void this.console.error("ThinMint.Panel.render","TemplateData is required before rendering.");var path=this.template,template=ThinMint.Util.Mustache.getTemplate(path);if(template){var output=ThinMint.Util.Mustache.render(template,data),$newElement=jQuery(output);this.$el.replaceWith($newElement),this.$el=$newElement,"number"==typeof this.index&&this.$el.addClass("index-"+this.index),this.getDom(),this.bindDomEvents(),this.postRender()}},ThinMint.Panel.prototype.postRender=function(){},ThinMint.Mixin={},ThinMint.Mixin.EventEmitter=function(){var _super={};return _super._destruct=ThinMint.Util.callback(this._destruct),this._events=[],this._destruct=function(){_super._destruct.apply(this,arguments);var that=this;jQuery.each(this._events,function(index,event){that.off.apply(that,event)})},this._addEvent=function(){if("string"==typeof arguments[0]||jQuery.isPlainObject(arguments[0])!==!1){var event=Array.prototype.slice.call(arguments);"string"==typeof event[0]?4==event.length?event.splice(2,1):3==event.length&&"function"!=typeof event[1]&&"string"!=typeof event[1]&&event.splice(1,1):3==event.length&&event.splice(2,1),this._events.push(event)}},this.on=function(){this._addEvent.apply(this,arguments),ThinMint.Page.Panel.on.apply(ThinMint.Page.Panel,arguments)},this.one=function(){this._addEvent.apply(this,arguments),ThinMint.Page.Panel.one.apply(ThinMint.Page.Panel,arguments)},this.off=function(){ThinMint.Page.Panel.off.apply(ThinMint.Page.Panel,arguments)},this},ThinMint.Mixin.Paginate=function(){var _super={};return _super.init=ThinMint.Util.callback(this.init),_super.getPage=ThinMint.Util.callback(this.getPage),_super.setPage=ThinMint.Util.callback(this.setPage),_super.getPages=ThinMint.Util.callback(this.getPages),_super.setPages=ThinMint.Util.callback(this.setPages),_super.pageNext=ThinMint.Util.callback(this.pageNext),_super.pagePrevious=ThinMint.Util.callback(this.pagePrevious),_super.pageTo=ThinMint.Util.callback(this.pageTo),_super.onPage=ThinMint.Util.callback(this.onPage),this.pageFirst=1,this.page=1,this.pages=1,this.getPage=function(){return this.page},this.setPage=function(page){return this.page=Number(page),this},this.getPages=function(){return this.pages},this.setPages=function(pages){return this.pages=Number(pages),this},this.pageNext=function(){return this.page>=this.pages?void this.console.warn("ThinMint.Mixin.Paginate","Already at the max page."):(++this.page,this.onPage())},this.pagePrevious=function(){return this.page<=this.pageFirst?void this.console.warn("ThinMint.Mixin.Paginate","Already at the first page."):(--this.page,this.onPage())},this.pageTo=function(page){return page=parseInt(page),page>=this.pages||page<=this.pageFirst?void this.console.warn("ThinMint.Mixin.Paginate","Cannot go outside of the allowed pages."):(this.page=page,this.onPage())},this.onPage=function(){_super.onPage.apply(this,arguments)},this};